<?xml version="1.0"?>
<launch>
  <arg name="debug" default="false" />
  <arg name="controller_type" default="ds4" />
  <arg name="simulation" default="false" />

  <!-- launch joystick -->
  <node name="xbox_joystick" pkg="joy" type="joy_node" if="$(eval arg('controller_type') == 'xbox')">
      <param name="dev" value="/dev/input/js0" />
      <param name="deadzone" value="0.15" />
      <param name="autorepeat_rate" value="10.0" />
      <param name="controller_type" value= "$(arg controller_type)"/>
  </node>  

  
  <!-- publish tf for the robot links -->
  <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher" respawn="true" output="screen" />

  <!-- start move group  -->
  <include file="$(find hdt_6dof_a24_pincer_moveit)/launch/move_group.launch">
    <arg name="allow_trajectory_execution" value="true"/>
    <arg name="info" value="true"/>
    <arg name="fake_execution" value="false"/>
    <arg name="debug" value="$(arg debug)"/>
  </include>


  <!-- start trigger_guard -->
  <node name="joystick_convert" pkg="hdt_generic_joystick" type="joystick_convert" respawn="true" output="screen">
  </node>

  <!-- parameters that define colors used by hdt_generic_joystick in Rviz -->
  <rosparam command="load" file="$(find hdt_generic_joystick)/support_files/joystick_feedback_colors.yaml" />

  <include file="$(find gesture_control)/launch/adroit_gesture_control.launch" if="$(eval arg('controller_type') == 'myo')">
    <arg name="myo_sim" value= "$(arg simulation)"/>
  </include>
  
  <!--Start the control script.  Load in xacro for position limits -->
  <node name="generic_joystick" pkg="hdt_generic_joystick" type="generic_joystick2" respawn="false" output="screen">
    <param name="controller_prefix" value="hdt_arm"/>
  </node>



</launch>
